import os
import re
import colorama
import ipinfo
from colorama import Fore, init
from apiverve_phonenumbervalidator.apiClient import PhonenumbervalidatorAPIClient

script_dir = os.path.dirname(os.path.abspath(__file__))
database_path = os.path.join(script_dir, "database.txt")

api = PhonenumbervalidatorAPIClient("4ae37b34-e5b8-405c-ae0f-4c39f8b7bc52")

access_token = "1a9fac0a2e4c0c"
handler = ipinfo.getHandler(access_token)

while True:
    init()

    print(colorama.Fore.RED + "@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@")
    print("@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#SS%??????%SS#@@@@@@@@@@@@@@@@@@@@@@@@@@")
    print("@@@@@@@@@@@@@@@@@@@@@@@@@@@@S%*;::::;;++++;;::::;*%S@@@@@@@@@@@@@@@@@@@@@")
    print("@@@@@@@@@@@@@@@@@@@@@@@@#%+::;+?S##@@@@@@@@@@##S?+;::+%#@@@@@@@@@@@@@@@@@")
    print("@@@@@@@@@@@@@@@@@@@@@@S+::+%#@@@@@@@@@@@@@@@@@@@@@@#%+::*S@@@@@@@@@@@@@@@")
    print("@@@@@@@@@@@@@@@@@@@@S;,;%#@@@@@@@@@@@@@@@@@@@@@@@@@@@@#%;,;S@@@@@@@@@@@@@")
    print("@@@@@@@@@@@@@@@@@@#+.;S@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@S;.+#@@@@@@@@@@@")
    print("@@@@@@@@@@@@@@@@@S,,%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%,,S@@@@@@@@@@")
    print("@@@@@@@@@@@@@@@@%.;#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#;.%@@@@@@@@@")
    print("@@@@@@@@@@@@@@@%.;#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#;.S@@@@@@@@")
    print("@@@@@@@@@@@@@@#,:##S@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@S##,:#@@@@@@@")
    print("@@@@@@@@@@@@@@* %@S,#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#:S@% ?@@@@@@@")
    print("@@@@@@@@@@@@@#:,#@#,*@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@*,#@#,:#@@@@@@")
    print("@@@@@@@@@@@@@#.;###+,#@##@@##SSS#@@##@@@@@@##@@#SSS##@@##@#,;##@;,#@@@@@@")
    print("@@@@@@@@@@@@@#.+S??+.#SS@#S%SSS##@@#SS#@##SS#@@###SSSS#@S%#.+?%S+.#@@@@@@")
    print("@@@@@@@@@@@@@#,;%++,,?%@@@#@@@@@@@@@@######@@@@@@@@@@#@@@%?,:+*%;,#@@@@@@")
    print("@@@@@@@@@@@@@@;.?;: ;S@@@@@@@#S%%%%S#@@@@@@#S%%%%S#@@@@@@@S: ;;?.+@@@@@@@")
    print("@@@@@@@@@@@@@@? :;.+#@#S##S%*+;:,,:*S#SSSS#S*:,,,:+*?S##S#@#+.;:.%@@@@@@@")
    print("@@@@@@@@@@@@@@#,.,.S@#S*:,..  ......+?%##%%+....... ..,:*S#@S.,.:#@@@@@@@")
    print("@@@@@@@@@@@@@@@* ,.:##; ............:#%@@%#:............ ;#@;., ?@@@@@@@@")
    print("@@@@@@@@@@@@@@@#,..,#% ............ *%S??S%* ............ %#,..:#@@@@@@@@")
    print("@@@@@@@@@@@@@@@@?..,#S........... .*##;  ;S#*. ...........S#:..?@@@@@@@@@")
    print("@@@@@@@@@@@@@@@@@; :#%*.........,+S@@S....%@@%;,.........*%#: ;@@@@@@@@@@")
    print("@@@@@@@@@@@@@@@@#;.%@S%;..,:;+*%S#@##:....:##@#S?*+;:,..+%S@%.;#@@@@@@@@@")
    print("@@@@@@@@@@@@@@@#,:S@@@S%???%%S##@@#%+ .... +%#@@##S%%???%S@@@S:,#@@@@@@@@")
    print("@@@@@@@@@@@@@@@% ?#@@@#####@@@@@%#?%...::...??#%#@@@######@@@#? %@@@@@@@@")
    print("@@@@@@@@@@@@@@@#,:%%#########@@@?#??,..++..,?*#%#@@#########%%:,#@@@@@@@@")
    print("@@@@@@@@@@@@@@@@S:,+*????**+++*S@##???SSSS???##@S*+++**??%?*+,:S@@@@@@@@@")
    print("@@@@@@@@@@@@@@@@@#%+:,,,....,;+;S@@@##@%%@##@@@S;+;,....,,,;+%#@@@@@@@@@@")
    print("@@@@@@@@@@@@@@@@@@@@S..,::...:%#*#@@@@@%%@@@@@#*#%:...::,..#@@@@@@@@@@@@@")
    print("@@@@@@@@@@@@@@@@@@@@#:.+?*,...S@###@#@####@#@###@S...,*?+.;@@@@@@@@@@@@@@")
    print("@@@@@@@@@@@@@@@@@@@@@*.%S*,..:++*+*+*+**?**?**+*++:..,?S% *@@@@@@@@@@@@@@")
    print("@@@@@@@@@@@@@@@@@@@@@%.?S?,..:*+%?%?S+#++#+S*%??**:. :?S?.%@@@@@@@@@@@@@@")
    print("@@@@@@@@@@@@@@@@@@@@@S.*#?*..:;;;?*?%*#??#*%?*?;;;:.,*?#*.S@@@@@@@@@@@@@@")
    print("@@@@@@@@@@@@@@@@@@@@@S.*@#S%+,++?*+**+?++?;**++?++:+%S#@*.S@@@@@@@@@@@@@@")
    print("@@@@@@@@@@@@@@@@@@@@@S.+@@@@@#?;++?*S+@**@+S*?+++?#@@@@@+.#@@@@@@@@@@@@@@")
    print("@@@@@@@@@@@@@@@@@@@@@#+.?#@@@S?#S%???******???%S#?S@@@#*.*@@@@@@@@@@@@@@@")
    print("@@@@@@@@@@@@@@@@@@@@@@@?,:+%@#%?@##@#@#SS#@#@##@%%#@%+:,?@@@@@@@@@@@@@@@@")
    print("@@@@@@@@@@@@@@@@@@@@@@@@#?:.;#@##@@@##@SS@##@@@##@#;.:?#@@@@@@@@@@@@@@@@@")
    print("@@@@@@@@@@@@@@@@@@@@@@@@@@@S:,%@@@@@@@@@@@@@@@@@@%,:S@@@@@@@@@@@@@@@@@@@@@")
    print("@@@@@@@@@@@@@@@@@@@@@@@@@@@@#+.*#@@@@#S%%S#@@@@#+.+#@@@@@@@@@@@@@@@@@@@@@@")
    print("@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%::;++;::;;:::;+;::%@@@@@@@@@@@@@@@@@@@@@@@@")
    print("@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@S%??%##@@##%???S@@@@@@@@@@@@@@@@@@@@@@@@@@")
    print("@@@@@@@@@@@@@@@@@@@@@@@@@@@@produced by ARHangel, coded by onetoper@@@@@@@")
    print(colorama.Fore.GREEN + "[1] - searcher [2] - IP info [3] - number validator [4] [5] [6]")
    try:
        choise = int(input(colorama.Fore.CYAN + "enter the number of what you need: "))
    except ValueError:
        print("Please enter a valid number!")
        continue
    
    if choise == 1:
        keyword = input("enter keywords to search: ")
        found_lines = []
        try:
            with open(database_path, "r", encoding="utf-8") as file:
                for line in file:
                    if re.search(keyword, line, re.IGNORECASE):
                        found_lines.append(line.strip())
            
            if found_lines:
                print("\nFound matches:")
                for i, found_line in enumerate(found_lines, 1):
                    print(f"{i}. {found_line}")
            else:
                print("\nNo matches found")
                
        except FileNotFoundError:
            print("\nError: database file not found!")
        except Exception as e:
            print(f"\nAn error occurred: {str(e)}")
        input("enter some text here to go to main screen...")
    elif choise == 2:
        ip_address = input("enter target IP address: ")
        try:
            details = handler.getDetails(ip_address)
            print(f"\nCity: {details.city}")
            print(f"Location: {details.loc}")
        except Exception as e:
            print(f"\nError getting IP info: {str(e)}")
            
    elif choise == 3:
        phone = input("enter target phone number: ")
        country = input("enter target phone country(United States: us, Russia: ru etc.): ")
        try:
            query = {"number": phone, "country": country}
            result = api.execute(query)
            print("\nValidation result:")
            print(result)
        except Exception as e:
            print(f"\nError validating phone number: {str(e)}")
            
    else:
        print("\nInvalid choice. Please try again.")                                        